apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: traefik
spec:
  hosts:
    - resolvemy.host
    - controlcenter.house
    - '*.controlcenter.house'
    - '*.mylogin.space'
    - '*.kjmedia.stream'
    - '*.writemy.codes'
    - '*.ipaddr.network'
    - '*.kristianjones.dev'
  gateways:
    - traefik-gateway
  tls:
    - match:
        - port: 443
          sniHosts:
            - mysql.mylogin.space
      route:
        - destination:
            host: core-kjdev-vtgate-2cf17ded
            port:
              number: 3306
          weight: 100

    - match:
        - port: 443
          sniHosts:
            - resolvemy.host
            - controlcenter.house
            - '*.controlcenter.house'
            - '*.mylogin.space'
            - '*.int.mylogin.space'
            - '*.kjmedia.stream'
            - '*.writemy.codes'
            - 'registry.writemy.codes'
            - '*.ipaddr.network'
            - '*.kristianjones.dev'
      route:
        - destination:
            host: traefik-core
            port:
              number: 443
          weight: 100

