
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
    name: kjmedia-policy
    namespace: external-istiod

spec:
  selector:
    matchLabels:
      istio: ingressgateway

  action: CUSTOM

  provider:
    name: 'authentik'

  rules:
    - from:
        - source:
            notIpBlocks:
              - 172.16.0.0/12
              - 10.0.0.0/8

      to:
        - operation:
            hosts:
              # You can create a single resource and list all Domain names here, or create multiple resources
              - accessmyporn.download
              - sabnzbd.kjmedia.stream
              - radarr.kjmedia.stream
              - prowlarr.kjmedia.stream
              - sonarr.kjmedia.stream
