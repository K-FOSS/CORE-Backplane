{{- if index .Values "kube-router" "enabled" }} 
apiVersion: "cilium.io/v2alpha1"
kind: CiliumBGPPeeringPolicy
metadata:
  name: 01-bgp-peering-policy
spec: # CiliumBGPPeeringPolicySpec
  nodeSelector:
    matchLabels:
      beta.kubernetes.io/os: linux

  virtualRouters: # []CiliumBGPVirtualRouter
    - localASN: 64512
      exportPodCIDR: true
      neighbors: # []CiliumBGPNeighbor
        {{ range .Values.peers }}
        - peerAddress: '{{ .ip }}'
          peerASN: '{{ .asn }}'
        {{- end }}
{{- end }}
