{{- $fullName := include "pnetwork.fullname" . -}}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ $fullName }}-netbird-config
data:
  management.json: |
      {
        "Stuns": [
          {
            "Proto": "tcp",
            "URI": "stun:nat.ipaddr.network:3478",
            "Username": "demo",
            "Password": "secret"
          },
          {
            "Proto": "udp",
            "URI": "stun:nat.ipaddr.network:3478",
            "Username": "demo",
            "Password": "secret"
          }
        ],
        "TURNConfig": {
          "Turns": [
            {
              "Proto": "tcp",
              "URI": "turn:nat.ipaddr.network:3478",
              "Username": "demo",
              "Password": "secret"
            },
            {
              "Proto": "udp",
              "URI": "turn:nat.ipaddr.network:3478",
              "Username": "demo",
              "Password": "secret"
            }
          ],
          "CredentialsTTL": "12h",
          "Secret": "",
          "TimeBasedCredentials": false
        },
        "Signal": {
          "Proto": "http",
          "URI": "nat.ipaddr.network:10000",
          "Username": "",
          "Password": null
        },
        "Datadir": "",
        "HttpConfig": {
          "Address": "0.0.0.0:443",
          "AuthIssuer": "https://idp.mylogin.space",
          "AuthAudience": "",
          "AuthKeysLocation": "https://$WIRETRUSTEE_AUTH0_DOMAIN/.well-known/jwks.json",
          "CertFile":"$WIRETRUSTEE_MGMT_API_CERT_FILE",
          "CertKey":"$WIRETRUSTEE_MGMT_API_CERT_KEY_FILE"
        },
        "IdpManagerConfig": {
          "Manager": "none"
        }
      }