apiVersion: v1
kind: Service
metadata:
  name: psql

  labels:
    lan-mode: private
    wan-mode: public

  annotations:
    external-dns.alpha.kubernetes.io/hostname: psql.mylogin.space
    io.cilium/lb-ipam-ips: 10.1.1.38
    io.cilium/lb-ipam-sharing-key: psql
    metallb.universe.tf/ip-allocated-from-pool: anycast-pool
    metallb.universe.tf/loadBalancerIPs: 10.1.1.38

    purelb.io/allow-shared-ip: psql.mylogin.space
    purelb.io/service-group: anycast
    purelb.io/allow-local: 'true'
spec:
  type: LoadBalancer
  loadBalancerClass: purelb.io/purelb

  ports:
    - name: postgresql

      protocol: TCP
      appProtocol: postgresql

      port: 5432
      targetPort: psql

  selector:
    app.kubernetes.io/name: pgpool