apiVersion: v1
kind: Service
metadata:
  name: psql

  labels:
    lan-mode: private
    wan-mode: public

  annotations:
    external-dns.alpha.kubernetes.io/hostname: psql-main.mylogin.space
    purelb.io/allow-shared-ip: psql-main.mylogin.space
    purelb.io/service-group: anycast
    purelb.io/allow-local: 'true'

spec:
  type: LoadBalancer
  loadBalancerClass: purelb.io/purelb

  loadBalancerIP: 66.165.222.124

  ports:
    - name: postgresql

      protocol: TCP
      appProtocol: postgresql

      port: 5432
      targetPort: psql

  selector:
    app.kubernetes.io/name: pgpool