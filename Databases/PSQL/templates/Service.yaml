apiVersion: v1
kind: Service
metadata:
  annotations:
    consul.hashicorp.com/service-name: psql
    metallb.universe.tf/ip-allocated-from-pool: anycast-pool
    external-dns.alpha.kubernetes.io/hostname: psql.mylogin.space
    metallb.universe.tf/loadBalancerIPs: 10.1.1.38
    io.cilium/lb-ipam-sharing-key: psql
    io.cilium/lb-ipam-ips: 10.1.1.38

  labels:
    app: infra1-dc1-psql-spilo-spilo-db
    spilo-cluster: k8s-0.resolvemy.host
    lan-mode: 'private'
    wan-mode: 'public'
  
  name: infra1-dc1-psql-spilo-spilo-db

spec:
  externalTrafficPolicy: Cluster
  internalTrafficPolicy: Cluster
  loadBalancerIP: 10.1.1.38
  ports:
    - appProtocol: postgresql
      name: psql
      port: 5432
      protocol: TCP
      targetPort: 5432

  type: LoadBalancer

  selector:
    spilo-role: master
    team: core
