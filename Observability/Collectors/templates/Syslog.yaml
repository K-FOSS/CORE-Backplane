apiVersion: v1
kind: Service
metadata:
  name: '{{ include "alloy.fullname" $.Subcharts.alloy }}-syslog'

  annotations:
    purelb.io/allow-shared-ip: syslog.dc1.mylogin.space
    purelb.io/allow-local: 'true'
    purelb.io/addresses: '10.1.1.14'
    argocd.argoproj.io/sync-wave: '0'

spec:
  ports:
    - port: 514
      protocol: UDP
      targetPort: 1514

    - port: 514
      protocol: TCP
      targetPort: 1514

  selector:
    {{- include "alloy.selectorLabels" $.Subcharts.alloy | nindent 4 }}

  internalTrafficPolicy: Local
  sessionAffinity: None
  type: LoadBalancer