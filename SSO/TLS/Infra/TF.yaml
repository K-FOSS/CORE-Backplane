apiVersion: infra.contrib.fluxcd.io/v1alpha1
kind: Terraform
metadata:
  name: k0s-cntrl-sso-tls
spec:
  path: ./SSO/TLS/TF
  approvePlan: auto
  interval: 1m

  vars:
    - name: keycloak_administrator_password
      valueFrom:
        secretKeyRef:
          name: k0s-cntrl-sso-tls-aaatoken
          key: Token

  sourceRef:
    kind: GitRepository
    name: k0s-cntrl-sso-tls
  
  writeOutputsToSecret:
    name: k0s-cntrl-sso-tls-output

