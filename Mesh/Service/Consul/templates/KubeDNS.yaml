apiVersion: v1
data:
  Corefile: |
    .:53 {
        errors
        health
        ready
        kubernetes cluster.local in-addr.arpa ip6.arpa {
          pods insecure
          ttl 120
          fallthrough in-addr.arpa ip6.arpa
        }
        prometheus :9153
        fanout . 10.1.1.50:53 10.1.1.53:53 1.1.1.1:53 1.0.0.1:53
        cache 300 {
          prefetch 500 5s
          serve_stale 60
        }
        loop
        reload
        loadbalance
    }

    kjdev {
      errors

      fanout . 10.1.1.60:53 10.1.1.61:53 {
        network TCP
      }
    
      cache 300 {
        prefetch 500 5s
        serve_stale 60
      }
    }
kind: ConfigMap
metadata:
  labels:
    k0s.k0sproject.io/stack: coredns
  name: coredns
  namespace: kube-system
